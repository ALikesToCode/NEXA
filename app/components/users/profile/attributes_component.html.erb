<%=
  component_wrapper do
    flex_layout(mt: 3) do |details_container|
      details_container.with_row do
        flex_layout(align_items: :center, justify_content: :space_between) do |heading|
          heading.with_column(flex: 1) do
            render(Primer::Beta::Heading.new(tag: :h4)) { t(:label_information) }
          end

          if User.current.admin? || User.current == @user
            heading.with_column do
              render(Primer::Beta::IconButton.new(
                icon: :gear,
                scheme: :invisible,
                tag: :a,
                "aria-label": t(:label_manage),
                href: User.current == @user? my_account_path : edit_user_path(@user)
              ))
            end
          end
        end
      end

      details_container.with_row(mt: 2) do
        if @user.pref.can_expose_mail?
          concat "#{User.human_attribute_name(:mail)}: "
          concat mail_to(escape_javascript(@user.mail), nil, encode: 'javascript')
        end
      end

      visible_custom_fields.each do |custom_field|
        details_container.with_row(test_selector: "user-custom-field") do
          concat "#{custom_field.name}: "
          value = @user.formatted_custom_value_for(custom_field)
          if value.is_a?(Array)
            concat safe_join(value, ", ")
          else
            concat value
          end
        end
      end
    end
  end
%>
